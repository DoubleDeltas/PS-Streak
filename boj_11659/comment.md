# 백준 11659: 구간 합 구하기 4
_Code: 20220406, Comment: 20220406, Last Edit: -_

(+백준 11441: 합 구하기)

## 들어가는 말
 AI 강좌를 들은지 이틀째, 아직까지는 버틸만 하지만 앞으로도 멀쩡한 정신을 유지할 진 모르겠다. 강좌를 듣는 중 머리를 싸매던 문제들을 해결하려 했으나, 결국 이번에도 자정까지 1시간을 남기고 새로운 실버 문제를 찾는 꼴이 되었다.
 부분 합 문제의 최적화는 처음이다. 문제를 들여다 보던 중 고등학교 때 배운 공식이 불현듯 생각나 쉽게 풀 수 있었다. 알아보니 이것이 '구간 합 구하기' 시리즈 중 두 번째로 만만한 녀석인 모양이다.

## 본문
 어떻게 보면 꼼수일지도, 어떻게 보면 통찰력일지도 모르겠으나, 이번 문제의 해법은 입력 양식에 힌트가 숨겨져 있다.

 ```cpp
 N M 
 a_1 a_2 a_3 ... a_n // 수열
 i_1 j_1 // 구간 ...
 i_2 j_2
 ...
 i_m j_m
 ```
 
 이 문제는 한 번의 채점에서 하나의 수열이 주어지고 여러 구간의 합을 묻고 있다. 여기서 우리는 수열에 대해 변하지 않는 정보를 구간에 상관없이 재사용하는 것이 효율적이라는 힌트를 얻는다. 나아가 그 정보를 미리 계산할 수 있고, 기억해둘 수 있다는 결론에 도달한다. 즉, 핵심은 메모이제이션(memoization)이다. 동적 계획법이기도 하고, 상향식 접근이라는 말도 쓴다.

 고등학교 1학년 수학 시간에, 수열을 다루면서 수열의 부분합을 이용해 수열값을 구하는 공식을 배운적이 있을 것이다.
 $$ a_n = S_n - S_{n-1} $$
 여기서
 $$ S_n = \sum_{i=1}^n a_i$$
 이다.
 조금만 생각해보면 다음과 같은 식이 당연한 것도 알 수 있다. 사실 이 쪽이 일반적이지만.
$$ \sum_{i=m}^n a_i = \sum_{i=1}^n a_i - \sum_{i=1}^{m-1} a_i - S_n - S_{m-1} $$
 우리가 풀고자하는 문제는 위 공식을 이용하면 $O(n+m)$ 시간 안에 풀 수 있다. $N, M < 100000$이니 충분히 풀 수 있다.
 굳이 $a_i$를 저장하는 것보단 처음부터 $S_i$를 저장하면 공간을 아낄 수 있다. 어차피 메모리는 넉넉해서 큰 의미는 없지만 말이다.


## 나가는 말
 해결했다고 생각했던 [18870: 좌표 압축](https://www.acmicpc.net/problem/18870)은 예상치 못한 복병에 부딪혔다. 이거 정말로 실버 II 문제가 맞나?
 우연히 [11441: 합 구하기](https://www.acmicpc.net/problem/11441)라는 문제를 찾았는데, 입력 순서를 제외하면 이 문제와 완전히 똑같다! 어떻게 된 일이지?